#include <stdio.h>

int main() {
    int choice;
    float balance = 10000;     // Initial balance
    float amount;
    int transactions = 0;

    printf("========= Mini ATM Simulator =========\n");
    printf("Initial Balance: %.2f\n", balance);

    while (1) {
        // Stop if transactions reach 5
        if (transactions >= 5) {
            printf("\nMaximum transaction limit reached!\n");
            break;
        }

        // Display Menu
        printf("\n1. Check Balance\n");
        printf("2. Deposit\n");
        printf("3. Withdraw\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        // Validate choice
        if (choice < 1 || choice > 4) {
            printf("Invalid choice! Please select again.\n");
            continue;
        }

        if (choice == 1) {
            // Check Balance
            printf("Your Current Balance: %.2f\n", balance);
            transactions++;
        }

        else if (choice == 2) {
            // Deposit Amount
            printf("Enter amount to deposit: ");
            scanf("%f", &amount);

            if (amount <= 0) {
                printf("Invalid amount!\n");
                continue;
            }

            balance += amount;
            printf("Amount Deposited Successfully!\n");
            transactions++;
        }

        else if (choice == 3) {
            // Withdraw Amount
            printf("Enter amount to withdraw: ");
            scanf("%f", &amount);

            if (amount <= 0) {
                printf("Invalid amount!\n");
                continue;
            }

            if (balance - amount < 500) {
                printf("Insufficient balance! Minimum balance of 500 must remain.\n");
                continue;
            }

            balance -= amount;
            printf("Withdrawal Successful! Remaining Balance: %.2f\n", balance);
            transactions++;
        }

        else if (choice == 4) {
            // Exit
            printf("Thank you for banking with us!\n");
            break;
        }
    }

    // Summary after exit
    printf("\n========= Transaction Summary =========\n");
    printf("Total Transactions: %d\n", transactions);
    printf("Final Balance: %.2f\n", balance);
    printf("Session Ended.\n");

    return 0;
}
